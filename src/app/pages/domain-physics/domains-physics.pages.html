<div class="-z-50 flex top-0 h-[calc(20%)] max-[1400px]:h-[calc(100px)] min-[1400px]:fixed flex-col justify-around items-center p-4 bg-[#004382] text-slate-100  w-full"
    style=" background-image: url(https://www.bipm.org/kcdb/static/img/header-bg-11bf7d6685fa30bfc47c43738128b3c3.jpg);">

  <div class="w-full flex flex-row items-center justify-between absolute">
    <div class="ml-3">
      <img style="filter: drop-shadow(0 0.2rem 0.25rem rgba(255, 255, 255, 0.8))"
        src="https://www.bipm.org/documents/20126/27072194/KCDB2.0.png/9c3242fe-9354-00c8-2015-cff907504719?t=1581073267483"
        alt="kcdb-img" class="max-[1400px]:w-[180px] w-[260px]">
    </div>
    <div class="mr-3">
      <img src="assets/CENAM Blanco.png" class="max-[1400px]:w-[140px] w-[180px]" alt="cenam-img">
    </div>
  </div>
  <!-- <div class="flex flex-col justify-around items-center max-[950px]:w-1/3  w-1/2 bg-[#e7e8e9]
              rounded shadow-md px-2 max-[1400px]:py-3 py-6 max-[1400px]:mt-3 mt-12">
    <a class="max-[1400px]:text-base text-xl text-slate-600  font-bold underline" target="_blank"
      href="https://www.bipm.org/api/kcdb/swagger-ui/index.html?configUrl=/api/kcdb/v3/api-docs/swagger-config#/">
      API KCDB</a>
    <h2 class="max-[1400px]:text-base text-xl text-slate-500 font-medium mr-5 tex">
      México, CENAM (Centro Nacional de Metrología)
    </h2>
    <p class="text-slate-500 font-semibold max-[1400px]:text-base text-lg">
      Busqueda por <a target="_blank"
        href="https://www.bipm.org/kcdb/cmc/quick-search?includedFilters=cmcBranches.Dimensional+metrology&excludedFilters=cmcDomain.CHEM-BIO%2CcmcDomain.RADIATION&page=0&keywords=M%C3%A9xico"
        class="font-bold text-slate-700">{{area}}</a> domain
    </p>
  </div> -->
</div>
<div class="absolute top-[5%] w-full max-[800px]:relative">
  <div class="mx-auto flex flex-col justify-around items-center max-[800px]:w-full min-[800px]:w-1/2 max-[1400px]:w-1/3  w-1/2 bg-[#e7e8e9]
              rounded shadow-md px-2 max-[1400px]:py-3 py-6 max-[1400px]:mt-3 mt-12">
    <a class="max-[1400px]:text-base text-xl text-slate-600  font-bold underline" target="_blank"
      href="https://www.bipm.org/api/kcdb/swagger-ui/index.html?configUrl=/api/kcdb/v3/api-docs/swagger-config#/">
      API KCDB</a>
    <h2 class="max-[1400px]:text-base text-xl text-slate-500 font-medium mr-5 tex">
      México, CENAM (Centro Nacional de Metrología)
    </h2>
    <p class="text-slate-500 font-semibold max-[1400px]:text-base text-lg">
      Busqueda por <a target="_blank"
        href="https://www.bipm.org/kcdb/cmc/quick-search?includedFilters=cmcBranches.Dimensional+metrology&excludedFilters=cmcDomain.CHEM-BIO%2CcmcDomain.RADIATION&page=0&keywords=M%C3%A9xico"
        class="font-bold text-slate-700">{{area}}</a> domain
    </p>
  </div>
</div>

<div class="px-5 max-[800px]:mt-3 min-[800px]:mt-20 min-[1400px]:mt-56 max-[1400px]:h-[calc(82%-144px)] h-[calc(90%-224px-20px)] flex flex-col" style="z-index: 0;">

  <div class="intro-y flex flex-row sm:flex-nowrap items-center mt-3">
    <a href="./" class="btn btn-primary shadow-md mr-2"> ⬅ </a>
    <div class="flex-1 flex flex-row justify-between item-center ">
      <div class="flex flex-row justify-between items-center  w-full max-[850px]:flex-wrap-reverse">
        <div class="relative text-slate-500">
          <div class="flex flex-row items-center  max-[700px]:mt-2 max-[700px]:flex-col">
            <select [(ngModel)]="areaMetrologiaId" (change)="selectArea()"
              class="bg-gray-50 border w-72 border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 ">
              <option value="0">Todos</option>
              <option *ngFor="let item of areaMetrologia" [value]="item.id">{{item.label +' - '+ item.value}}</option>
            </select>
            <select [(ngModel)]="branchId" (change)="selectBranch()"
              class="bg-gray-50 w-72 ml-1 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 max-[850px]:mt-2">
              <option value="0">Selecione rama</option>
              <option *ngFor="let item of branch" [value]="item.id">{{item.label +' - '+ item.value}}</option>
            </select>
          </div>
        </div>
        <div class="w-60 relative text-slate-500 mr-2 ">
          <input #input type="text" class="form-control w-56 box pr-10 max-[700px]:pr-5 max-[700px]:w-72" placeholder="Busqueda por CMC ID"
            (input)="search(input.value)">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" icon-name="search"
            class="lucide lucide-search w-4 h-4 absolute my-auto inset-y-0 mr-3 right-0 max-[700px]:-right-10" data-lucide="search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </div>
      </div>


    </div>
  </div>

  <h1 class="p-2 text-lg text-slate-500">Total de servicios: {{totalItems}}</h1>
  <p class="mt-3"> {{selectNumber}} de {{numPaginas}} paginas</p>

  <div class="flex-1 intro-y col-span-12 max-[850px]:overflow-x-auto min-[950px]:overflow-y-auto  mt-5">
    <table *ngIf="servicioData.length>0; else n" class="table table-report -mt-2">
      <thead>
        <tr>
          <th class="text-center whitespace-nowrap  ">CMC ID</th>
          <th class="text-center whitespace-nowrap">Descripción</th>
          <th class="text-center whitespace-nowrap">Fecha de aprobación</th>
          <th class="text-center whitespace-nowrap">Comité Consultivo</th>
          <th class="text-center whitespace-nowrap">Código de servicio</th>
          <th class="text-center whitespace-nowrap">Estado</th>
        </tr>
      </thead>
      <tbody>
        <tr class="intro-x" *ngFor="let item of servicioData; let i = index">
          <td class="font-medium w-11 text-center" (click)="onClick(item.id)">
            <a class="cursor-pointer">
              {{item.kcdbCode}}
            </a>
          </td>
          <td class="w-48">
            <div class="flex items-center justify-center ">
              <p class="m-1">{{item.serviceValue}}, {{item.subServiceValue}}:
                <span class="font-bold text-slate-700">{{item.cmc.lowerLimit}} {{item.cmc.unit}}
                  {{item.cmc.upperLimit}} {{item.cmc.unit}}</span>
              </p>
            </div>
          </td>
          <td class="font-medium w-11 text-center cursor-pointer" (click)="onClick(item.id)">{{item.approvalDate}}</td>
          <td class="font-medium w-20 text-center cursor-pointer" (click)="onClick(item.id)">{{item.metrologyAreaLabel}}
          </td>
          <td class="w-11 text-center">
            {{(item.nmiServiceCode)?item.nmiServiceCode:"Sin NMIServiceCode"}}
          </td>
          <td class="font-medium w-11 text-center cursor-pointer" [innerHTML]="item.status | estado"></td>

        </tr>
      </tbody>

    </table>
    <p *ngIf="sin" class="text-sm text-gray-500 font-bold">No se encontraron resultados</p>

    <ng-template #n>
      <div class="w-full flex flex-row justify-around items-center">
        <svg width="44" height="44" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" stroke="black">
          <g fill="none" fill-rule="evenodd" stroke-width="2">
            <circle cx="22" cy="22" r="1">
              <animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1"
                keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite" />
              <animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline"
                keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite" />
            </circle>
            <circle cx="22" cy="22" r="1">
              <animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1"
                keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite" />
              <animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline"
                keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite" />
            </circle>
          </g>
        </svg>
      </div>
    </ng-template>


  </div>



  <app-modal-service *ngIf="selectServiceModal" [servicioData]="selectServiceModal"
    (quitar)="quitar()"></app-modal-service>

</div>
<shared-pagination *ngIf="numPaginas>0" [numberItems]="numPaginas" [resetValueItems]="debounce"
  (itemSelected)="debounceNum($event)"></shared-pagination>
